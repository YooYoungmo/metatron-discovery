<!--
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="ddp-type-contents ddp-resize2 ddp-type2" *ngIf="isShow">
  <!-- 닫기 버튼 -->
  <a href="javascript:" class="ddp-btn-close" (click)="close()"></a>
  <!-- //닫기 버튼 -->
  <div class="ddp-icon-name">
    <div class="ddp-ui-name2 ddp-type3">
      반복 실행 작업 생성
      <span class="ddp-txt-info ddp-type">
        SQL을 작성해 주세요.
      </span>
      <em class="ddp-bg-order-line2-type1"></em>
    </div>
  </div>
  <!-- contents in  -->
  <div class="ddp-type-contents-in ddp-scroll">
    <div class="ddp-box-popupcontents">
      <div class="ddp-ui-import-option" style="padding: 0">
        <!-- 사용법 및 예시 코드 제시... -->
        <div class="ddp-wrap-edit ddp-type"><label class="ddp-label-type ddp-bold ">Query(SQL)</label></div>
        <div class="ddp-ui-option-select">
          <div class="ddp-ui-edit-db">
            <div class="ddp-ui-textarea">
              <div class="ddp-ui-search-db ddp-clear">
                <component-select #sourceDatabaseSelect [array]="databases" [isFull]="false" [usePlaceholder]="true" [defaultIndex]="-1"
                                  [unselectedMessage]="'데이터베이스를 선택하세요.'" (onSelected)="onSelectedSourceDatabaseName($event)"></component-select>
              </div>
              <div class="ddp-wrap-edit">
                <div class="ddp-ui-edit">
                  <div class="ddp-wrap-editor">
                    <div editor-component
                         #editor
                         [(sText)]="dataAggregate.sourceQuery"
                         [sOptions]="options"
                         [sReadOnly]="false"
                         [sShowGutter]="false"
                         (textChanged)="onChangedQueryText($event)"
                    >
                    </div>
                  </div>
                </div>
              </div>
              <div class="ddp-txt-error">{{queryErrorMessage}} </div>
            </div>
            <!-- //쿼리 선택 -->
          </div>
        </div>
      </div>

      <div class="ddp-ui-import-option" style="position: relative; height:200px;">
        <div class="ddp-wrap-edit ddp-type"><label class="ddp-label-type ddp-bold ">Insert Table</label></div>
        <div class="ddp-ui-option-select">
          <div class="ddp-ui-edit-db">
            <div class="ddp-ui-textarea">
              <div class="ddp-ui-search-db ddp-clear">
                <div style="display: inline-block;">
                  <component-select #targetDatabaseSelect [array]="databases" [isFull]="false" [usePlaceholder]="true" [defaultIndex]="-1"
                                    [unselectedMessage]="'데이터베이스를 선택하세요.'" (onSelected)="onSelectedTargetDatabaseName($event)"></component-select>
                </div>
                <div style="display: inline-block;">
                  <component-select #targetTableSelect [array]="tables" [isFull]="false" [usePlaceholder]="true" [defaultIndex]="-1"
                                    [unselectedMessage]="'테이블을 선택하세요.'" (onSelected)="onSelectedTargetTableName($event)"></component-select>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div style="position:relative; height:100%;">
          <div [ngStyle]="{'visibility': schemaTableColumnList.length !== 0 ? 'visible':'hidden'}" style="position:absolute; top:0px; left:0; right:0; bottom:0;" grid-component #schemaColumn>
          </div>
          <div class="ddp-nodata" *ngIf="isColumnListNoData">
            {{'msg.space.ui.no.data' | translate}}
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- buttons -->
  <div class="ddp-ui-buttons">
    <!-- disabled 시 ddp-disabled 추가 -->
    <a href="javascript:" class="ddp-btn-type-popup" (click)="close()">{{'msg.comm.btn.cancl' | translate}}</a>
    <a href="javascript:" class="ddp-btn-type-popup ddp-bg-black" [class.ddp-disabled]="!isEnableNext()" (click)="next()">{{'msg.comm.btn.next' | translate}}</a>
  </div>
  <!-- //buttons -->
</div>
