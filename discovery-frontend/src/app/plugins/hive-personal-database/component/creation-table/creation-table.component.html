<!--
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="ddp-type-contents ddp-resize2 ddp-type2" *ngIf="isShow">
  <!-- 닫기 버튼 -->
  <a href="javascript:" class="ddp-btn-close" (click)="close()"></a>
  <!-- //닫기 버튼 -->
  <div class="ddp-icon-name">
    <div class="ddp-ui-name2 ddp-type3" style="padding-bottom: 0px;">
      테이블 생성하기
      <span class="ddp-txt-info ddp-type">
        테이블 정보를 입력하세요.
      </span>
    </div>
  </div>
  <!-- contents in  -->
  <div class="ddp-type-contents-in ddp-full">
    <div class="ddp-box-popupcontents">

      <div class="ddp-wrap-edit3 ddp-type">
        <label class="ddp-label-type ddp-bold ">데이터베이스</label>
        <div style="width: 290px">
          <component-select [array]="databases" [isFull]="true" [defaultIndex]="0" [disabled]="hasOtherDatabaseImportedPermission() ? false : true" (onSelected)="databaseName = $event"></component-select>
        </div>
      </div>

      <div class="ddp-wrap-edit3 ddp-type {{isInvalidTableName ? 'ddp-error' : ''}}">
        <label class="ddp-label-type ddp-bold ">테이블명</label>
        <div class="ddp-ui-edit-option ">
          <input class="ddp-input-typebasic" type="text" style="width: 290px" [(ngModel)]="tableName" (focus)="isInvalidTableName=false" />
          <span class="ddp-ui-error">{{errMsgTableName}}</span>
        </div>
      </div>

      <div class="ddp-edit-setting ddp-type ddp-selected">
        <div class="ddp-wrap-edit3 ddp-type">
          <label class="ddp-label-type ddp-info-inline ddp-bold ">컬럼</label>
          <div class="ddp-box-code">
            <div class="ddp-clear ddp-list-code" *ngFor="let column of creatingColumns; let i = index">
              <div *ngIf="column.columnType === 'general'">
                <div class="ddp-col-6">
                  <input type="text" class="ddp-input-typebasic ddp-full" placeholder="컬럼명을 입력하세요"
                         [(ngModel)]="column.columnName" (ngModelChange)="column.error = false">
                </div>
                <div class="ddp-col-6">
                  <component-select [array]="columnDataTypes" [isFull]="true" [usePlaceholder]="true" [defaultIndex]="-1"
                                    [unselectedMessage]="'데이터타입을 선택하세요'" (onSelected)="column.error = false; column.columnDataType = $event"></component-select>
                </div>
                <span class="ddp-data-error" *ngIf="column.error"> {{column.errorMessage}}</span>
                <a *ngIf="i > 0" class="ddp-icon-close" href="javascript:" (click)="onClickRemoveColumn(i)"></a>
              </div>
              <div *ngIf="column.columnType === 'partition'">
                <div class="ddp-col-6">
                  <component-select [array]="partitionColumnNames" [isFull]="true" [usePlaceholder]="true" [defaultIndex]="-1" [unselectedMessage]="'파티션 컬럼명을 선택하세요'"
                                    (onSelected)="column.error = false; column.columnName = $event"></component-select>
                </div>
                <div class="ddp-col-6">
                  <component-select [array]="columnDataTypes" [isFull]="true" [defaultIndex]="0" [disabled]="true"></component-select>
                </div>
                <span class="ddp-data-error" *ngIf="column.error"> {{column.errorMessage}}</span>
                <a class="ddp-icon-close" href="javascript:" (click)="onClickRemoveColumn(i)"></a>
              </div>
            </div>
            <a class="ddp-btn-add" href="javascript:" style="margin-right:10px" (click)="addColumn('general')">
              <em class="ddp-icon-plus"></em>일반 컬럼 추가
            </a>
            <a class="ddp-btn-add" href="javascript:" (click)="addColumn('partition')">
              <em class="ddp-icon-plus"></em>파티션 컬럼 추가
            </a>
          </div>
        </div>
      </div>
    </div>
    <!-- //contents in  -->
    <!-- buttons -->
    <div class="ddp-ui-buttons">
      <!-- disabled 시 ddp-disabled 추가 -->
      <a href="javascript:" class="ddp-btn-type-popup" (click)="close()">{{'msg.comm.btn.close' | translate}}</a>
      <a href="javascript:" class="ddp-btn-type-popup ddp-bg-black" (click)="done()">{{'msg.comm.btn.done' | translate}}</a>
    </div>
    <!-- //buttons -->

  </div>
</div>
